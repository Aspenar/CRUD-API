<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add a New Card to my Collection</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="row">
      <div class="col-12">
        <h1>Add a New Card to my Collection</h1>
      </div>
    </div>
    <div class="row">
      <div class="col-4">
        <a href="collection.html">View Cards in Collection</a>
      </div>
      <div class="col-4">
        <a href="current-cards.html">Change a Card's Details</a>
      </div>
    </div>
    <hr />
    <div class="row">
      <div class="col-2">
        <label for="card_name">Card Name</label>
        <input type="text" id="card_name" name="card_name" />
      </div>
    </div>
    <div class="row">
      <div id="card_name-error" class="col-6 error-message">&nbsp;</div>
    </div>

    <div class="row">
      <div class="col-2">
        <lable for="color">Color</lable>
        <select id="color_id" name="color_id">
          <option value="0"></option>
          <option value="1">White</option>
          <option value="2">Blue</option>
          <option value="3">Black</option>
          <option value="4">Red</option>
          <option value="5">Green</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div id="color-error" class="col-6 error-message">&nbsp;</div>
    </div>

    <div class="row">
      <div class="col-2">
        <lable for="type_id">Type</lable>
        <select id="type_id" name="type_id">
          <option value="0"></option>
          <option value="1">Creature</option>
          <option value="2">Enchantment</option>
          <option value="3">Instant</option>
          <option value="4">Artifact</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div id="type-error" class="col-6 error-message">&nbsp;</div>
    </div>

    <div class="row">
      <div class="col-2">
        <lable for="year_id">Set</lable>
        <select id="year_id" name="year_id">
          <option value="0"></option>
          <option value="1">Zendikar Rising</option>
          <option value="2">Kaldheim</option>
          <option value="3">Neon Dynasty</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div id="year-error" class="col-6 error-message">&nbsp;</div>
    </div>

    <div class="row">
      <div class="col-2">
        <lable for="cmc">Converted Mana Cost</lable>
        <input id="cmc" type="number" name="cmc" min="1" max="10" />
      </div>
    </div>
    <div class="row">
      <div id="cmc-error" class="col-6 error-message">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col-2">
        <button id="submit">Submit</button>
      </div>
    </div>
    <script>
      const isEmpty = (obj) => object.keys(obj).length === 0;

      document.getElementById("submit").addEventListener("click", (event) => {
        const formData = new FormData();

        if (document.getElementById("type_id").value.length !== 0) {
          formData.append("type_id", document.getElementById("type_id").value);
        }
        if (document.getElementById("year_id").value.length !== 0) {
          formData.append("year_id", document.getElementById("year_id").value);
        }
        if (document.getElementById("color_id").value.length !== 0) {
          formData.append("color_id", document.getElementById("color_id").value);
        }
        if (document.getElementById("cmc").value !== 0) {
          formData.append("cmc", document.getElementById("cmc").value);
        }
        if (document.getElementById("card_name").value.length !== 0) {
          formData.append("card_name", document.getElementById("card_name").value);
        }
        //Settings for FETCH API request
        let fetchSettings = {
          method: "POST",
          body: formData,
        };

        //Send FETCH API request
        fetch("http://localhost/card/", fetchSettings)
          .then((response) => {
            return new Promise((resolve) =>
              response.json().then((json) =>
                resolve({
                  status: response.status,
                  json,
                })
              )
            );
          })
          //Logic to display errors on form
          .then(({ status, json }) => {})
          .catch((error) => {
            console.error("Error:", error);
          });
        return;
      });
    </script>
  </body>
</html>
